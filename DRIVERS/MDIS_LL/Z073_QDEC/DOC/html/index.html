<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - MDIS4 Driver for Z073_QDEC - Main Page</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">MDIS4 Driver for Z073_QDEC &nbsp; </h1>
	<h3>Main Page</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; <a class="qindex" href="examples.html">Examples</a> &nbsp; </center>
<hr><h1>MDIS4 Driver for Z073_QDEC Documentation</h1>
<p>
This is the documentation of the MDIS low-level driver for the 16Z073_QDEC FPGA module.<p>
The 16Z073_QDEC is a quadrature decoder implemented in an Chameleon FPGA. It supports the following features:<p>
<ul>
<li>16 bit counter for position</li><li>debouncing of input signals (fixed debounce parameters)</li><li>seperate interrupts for move up, move down, button press and button release.</li></ul>
<p>
<br>
 <h2><a name="Variants"></a>
Variants</h2>
<div class="fragment"><pre>      Core      Description        Driver        Switch
    --------    ---------------    ----------    -------------
    16Z73-00    16 bit position    Standard           -
    16Z73-01    24 bit position    driver_24*    Z73_POSCNT_24
</pre></div><p>
<br>
 <h2><a name="FuncDesc"></a>
Functional Description</h2>
<br>
 <h3><a name="General"></a>
General</h3>
This Z073 MDIS4 driver initializes the hardware and services the interrupt of the FPGA module. If an interrupt occurs, the driver will send a signal (if installed) to the application to inform it that the button was moved, pressed or released.<p>
The actual data (position counter) is only read when the application performs an M_GetStat(Z073_STATUS). Due to the slow frequency of buttons the application should have plenty of time for collecting the data.<p>
<br>
 <h3><a name="reading"></a>
Reading the Data</h3>
The application can either poll the status of the module in an user definable frequency or install signals to get informed of changes on the hardware (only when individual interrupts enabled). Whenever the status is read, the position counter is zeroed and the status of the individual events is reset.<p>
<br>
 <h4><a name="getblock"></a>
Using M_getblock()</h4>
The status can be read using the M_Getstat(Z073_STATUS). This GetStat will return an 32bit with the encoded status of the hardware. For the exact layout of this status word see <a class="el" href="z73__drv_8h.html#status_return">section about Z073_STATUS word returned</a>.<p>
<br>
 <h2><a name="interrupts"></a>
Interrupts</h2>
The driver supports interrupts from the FPGA. The M-Module’s interrupt can be enabled/disabled through the M_MK_IRQ_ENABLE SetStat code or the device descriptor. The SetStats Z073_INT_UP, Z073_INT_DWN, Z073_INT_PRS and Z073_INT_REL enable/disable the single interrupt causes. The same effect can be achieved through the corresponding descriptor entries.<p>
<br>
 <h2><a name="signals"></a>
Signals</h2>
The driver can send signals to notify the application of changes on the signal lines . The signal must be activated via the Z73_SIG_PRS_REL and Z073_SIG_MOVE SetStat codes and can be cleared by the same code and passing 0 as argument.<p>
<br>
 <h2><a name="api_functions"></a>
Supported API Functions</h2>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>API function</b> </td><td><b>Functionality</b> </td><td><b>Corresponding low level function</b><p>
</td></tr>
<tr>
<td>M_open()</td><td>Open device</td><td><a class="el" href="z73__drv_8c.html#a1">Z73_Init()</a><p>
</td></tr>
<tr>
<td>M_close() </td><td>Close device  </td><td><a class="el" href="z73__drv_8c.html#a2">Z73_Exit()</a>) </td></tr>
<tr>
<td>M_read() </td><td>not supported by driver  </td><td><a class="el" href="z73__drv_8c.html#a3">Z73_Read()</a> </td></tr>
<tr>
<td>M_write() </td><td>not supported by driver  </td><td><a class="el" href="z73__drv_8c.html#a4">Z73_Write()</a> </td></tr>
<tr>
<td>M_setstat() </td><td>Set device parameter  </td><td><a class="el" href="z73__drv_8c.html#a5">Z73_SetStat()</a> </td></tr>
<tr>
<td>M_getstat() </td><td>Get device parameter  </td><td><a class="el" href="z73__drv_8c.html#a6">Z73_GetStat()</a> </td></tr>
<tr>
<td>M_getblock() </td><td>not supported by driver  </td><td><a class="el" href="z73__drv_8c.html#a7">Z73_BlockRead()</a> </td></tr>
<tr>
<td>M_setblock() </td><td>not supported by driver  </td><td><a class="el" href="z73__drv_8c.html#a8">Z73_BlockWrite()</a> </td></tr>
<tr>
<td>M_errstringTs() </td><td>Generate error message  </td><td>- </td></tr>
</table>
<p>
<br>
 <h2><a name="descriptor_entries"></a>
Descriptor Entries</h2>
The low-level driver initialization routine decodes the following entries ("keys") in addition to the general descriptor keys:<p>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>Descriptor entry</b> </td><td><b>Description</b> </td><td><b>Values</b> <p>
</td></tr>
<tr>
<td>Z073_INT_PRS </td><td>enable push button pressed interrupt </td><td>0..1, default: 0  </td></tr>
<tr>
<td>Z073_INT_REL </td><td>enable push button released interrupt </td><td>0..1, default: 0  </td></tr>
<tr>
<td>Z073_INT_UP </td><td>enable button (counter) moved up interrupt </td><td>0..1, default: 0  </td></tr>
<tr>
<td>Z073_INT_DWN </td><td>enable button (counter) moved down interrupt </td><td>0..1, default: 0  </td></tr>
</table>
<p>
<br>
 <h2><a name="codes"></a>
Z73 specific Getstat/Setstat codes</h2>
see <a class="el" href="z73__drv_8h.html#getstat_setstat_codes">section about Getstat/Setstat codes</a><p>
<br>
 <h2><a name="Documents"></a>
Overview of all Documents</h2>
<h3><a name="z73_simp"></a>
Simple example for using the driver</h3>
<a class="el" href="z73__simp_8c.html">z73_simp.c</a> (see example section)<h3><a name="z73_min"></a>
Minimum descriptor</h3>
z73_min.dsc demonstrates the minimum set of options necessary for using the drver.<h3><a name="z73_max"></a>
Minimum descriptor</h3>
z73_min.dsc shows all possible configuration options for this driver.
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for MDIS4 Driver for Z073_QDEC using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2010 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

